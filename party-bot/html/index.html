
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<style>
body {
  background-color: #000000;
  margin: 0;
  overflow: hidden;
}
</style>
</head>
<body>
<script src="lib/three.min.js"></script>
<script>

var camera, scene, renderer;
var material;
var spike_geometry, body_geometry, light_geometry;
var spikes = new Array();
var bodies = new Array();
var lights = new Array();
var party_cube = new THREE.Object3D();;

var startTime = Date.now();

var init = function () {
  document.body.style.background = "rgb(20,20,60)";
  renderer = new THREE.WebGLRenderer();
  renderer.setSize( window.innerWidth, window.innerHeight );
  document.body.appendChild( renderer.domElement );
  camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 1000 );
  camera.position.z = 15;
  camera.position.y = 5;
  camera.lookAt(new THREE.Vector3(0,0,0));

  scene = new THREE.Scene();
  loader = new THREE.JSONLoader();

  var ambientLight = new THREE.AmbientLight( 0xDFC183 );
  var light = new THREE.DirectionalLight( 0x111111, 0.1 );
  light.position.set( 40, 40, 0 );
  scene.add(ambientLight);
  scene.add(light);

  material = new THREE.MeshLambertMaterial( { color: 0xFF0000, specular: 0x003399, shininess: 20 } );

  loader.load('party-bot-spike.js', function (geometry, materials) {
    spike_geometry = geometry;
    for(var i=0;i<6;i++) {
      spikes[i] = new THREE.Mesh(
      spike_geometry,
      material
      );
      spikes[i].receiveShadow = true;
      spikes[i].castShadow = true;
      if(i<4)  spikes[i].rotation.y = Math.PI/2*i;
      if(i>=4) spikes[i].rotation.x = Math.PI/2*((i-4)*2+1);
      party_cube.add(spikes[i]);
    }
  });
  loader.load('party-bot-body.js', function (geometry, materials) {
    body_geometry = geometry;
  });
  loader.load('party-bot-light.js', function (geometry, materials) {
    light_geometry = geometry;
  });
/*
  spike00 = new THREE.Mesh(
    spike_geometry,
    material
  );
  spike00.receiveShadow = true;
  spike00.castShadow = true;
  scene.add(spike00);*/
  animate();

  scene.add(party_cube);
};

var animate = function () {
  this.t = Date.now() - this.startTime;

  requestAnimationFrame( animate );

  party_cube.rotation.x = Math.sin(t/1000);
  party_cube.rotation.y = Math.sin(t/1400);
  if(t<200)console.log(spikes);


  renderer.render( scene, camera );
};

init();

</script>
</body>
</html>

